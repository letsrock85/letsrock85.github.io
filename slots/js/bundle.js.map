{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/SlotGame/SlotGame.js","webpack:///./src/js/SlotGame/Sound.js","webpack:///./src/js/SlotGame/components/Button.js","webpack:///./src/js/SlotGame/components/Controls.js","webpack:///./src/js/SlotGame/components/Info.js","webpack:///./src/js/SlotGame/components/Label.js","webpack:///./src/js/SlotGame/components/Loading.js","webpack:///./src/js/SlotGame/components/Paylines.js","webpack:///./src/js/SlotGame/components/Paytable.js","webpack:///./src/js/SlotGame/components/Reel.js","webpack:///./src/js/SlotGame/components/Slot.js","webpack:///./src/js/SlotGame/components/Tile.js","webpack:///./src/js/SlotGame/helpers.js","webpack:///./src/js/SlotGame/index.js","webpack:///./src/js/SlotGame/screens/GameOverScreen.js","webpack:///./src/js/SlotGame/screens/GameScreen.js","webpack:///./src/js/SlotGame/screens/PaytableScreen.js","webpack:///./src/js/SlotGame/screens/Screen.js","webpack:///./src/js/SlotGame/state.js","webpack:///./src/js/main.js","webpack:///external \"PIXI\""],"names":["defaultOptions","root","reels","lines","width","height","balance","wager","wagerStep","maxWager","spinTime","stopDelay","SlotGame","options","config","Object","assign","state","loadScreen","bind","onProgressAssets","onAssetsComplete","loading","Loading","x","y","screens","game","GameScreen","gameover","GameOverScreen","paytable","PaytableScreen","currentScreen","app","loader","init","destroy","appOptions","backgroundColor","PIXI","document","querySelector","appendChild","view","Loader","entries","forEach","id","Screen","screen","update","reset","stage","addChild","once","load","cb","Error","removeChild","ticker","remove","add","resource","progress","url","values","sounds","sound","stop","Sound","audio","clones","time","pause","currentTime","play","loop","value","volume","Button","style","fontSize","fontWeight","stroke","strokeThickness","dropShadow","dropShadowColor","dropShadowBlur","dropShadowAngle","Math","PI","dropShadowDistance","button","on","click","enable","fill","buttonMode","interactive","Controls","border","borderWidth","lineStyle","beginFill","drawRect","btnPaytable","btnWagerUp","btnWagerDown","btnSpin","btnAutoSpin","btnCheatSpin","elms","spaceAroundX","Info","balanceLabel","Label","winLabel","wagerLabel","frame","endFill","progressContainer","progressBar","progressStyle","lineHeight","progressText","assetStyle","wordWrap","wordWrapWidth","align","assetText","percent","assetName","text","toFixed","Paylines","slotWidth","slotHeight","panelHeight","container","panel","paylinesLabel","togglePayline","paths","buttons","generateElements","paylines","payline","index","btn","push","path","createPathLine","updatePathAndBottonsStatus","tileWidth","tileHeight","pathColors","first","startX","startY","color","length","moveTo","pos","i","lineTo","activePaylines","found","findIndex","splice","isActive","includes","setFill","Paytable","activeMultipliers","padding","elements","map","data","createBlock","el","floor","symbolIndex","matches","multiplier","symbols","tileData","tile","Tile","label","Reel","mask","blurFilter","BlurYFilter","strength","filters","result","tiles","speed","isSpining","isStopping","createTiles","abs","console","log","emit","pop","random","nextTile","sprite","texture","delta","children","getSpeed","onSpinComplete","maxY","addChildAt","changeTile","Slot","currentReel","onReelSpinComplete","reelWidth","reel","change","setTimeout","spining","isEqualReels","isEqualLines","line","join","isCorrectResult","reelResult","row","spin","stopReels","ratio","min","orig","scale","set","anchor","position","sumWidth","reduce","sum","margin","offset","spaceAroundY","sumHeight","ctx","autoSpinValue","balanceValue","wagerValue","winValue","slot","paylinesPanel","info","controls","wagerUp","wagerDown","spinAuto","cheatSpin","updateButtonStatus","name","marginY","marginX","panelWidth","initSymbols","initSounds","initPaylines","initMultipliers","createSlot","createPaylines","createInfo","createControls","win","autoSpinMode","sheet","resources","textures","filter","asset","isAudio","multipliers","actual","symbolId","s","factors","paylinesData","find","winPaylines","paylineIndex","stats","res","symbIndex","repetitions","prevSum","totalWin","analyseResult","victory","autoSpinDelay","j","activeIndex","winPayline","winSymbolIndex","genSuccessedResult","spinReels","genRandomResult","disable","paylable","Paylable","initialState","State","addEventListener","genStartGameButtons","sizes","createElement","textContent","window","newGame","body"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"js/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import * as PIXI from 'pixi.js';\r\nimport Loading from './components/Loading';\r\nimport GameScreen from './screens/GameScreen';\r\nimport GameOverScreen from './screens/GameOverScreen';\r\nimport PaytableScreen from './screens/PaytableScreen';\r\nimport state from './state';\r\n\r\nconst defaultOptions = {\r\n  // size\r\n  root: '.root',\r\n  reels: 3,\r\n  lines: 3,\r\n  width: 640,\r\n  height: 480,\r\n  // money\r\n  // balance: 10000,\r\n  balance: 1500,\r\n  wager: 100,\r\n  wagerStep: 100,\r\n  maxWager: 500,\r\n  // interface\r\n  spinTime: 1000,\r\n  stopDelay: 200,\r\n};\r\n\r\nclass SlotGame {\r\n  constructor(options = {}) {\r\n    const config = Object.assign(state, defaultOptions, options);\r\n    this.config = config;\r\n\r\n    // bindings\r\n    this.loadScreen = this.loadScreen.bind(this);\r\n    this.onProgressAssets = this.onProgressAssets.bind(this);\r\n    this.onAssetsComplete = this.onAssetsComplete.bind(this);\r\n\r\n    // Loading box\r\n    const loading = new Loading();\r\n    loading.x = (config.width - loading.width) / 2;\r\n    loading.y = (config.height - loading.height) / 2;\r\n\r\n    // Members\r\n    this.screens = {\r\n      game: GameScreen,\r\n      gameover: GameOverScreen,\r\n      paytable: PaytableScreen,\r\n    };\r\n    this.currentScreen = null;\r\n    this.app = null;\r\n    this.loader = null;\r\n    this.loading = loading;\r\n    this.state = state;\r\n\r\n    // init\r\n    this.init();\r\n  }\r\n\r\n  init(options = {}) {\r\n    const { config, screens, loading, onProgressAssets, onAssetsComplete } = this;\r\n\r\n    // Update options\r\n    if (options) Object.assign(config, options);\r\n\r\n    // Destroy prev game\r\n    if (this.app) this.destroy();\r\n\r\n    // create app\r\n    const appOptions = {\r\n      width: config.width,\r\n      height: config.height,\r\n      backgroundColor: 0x1099bb,\r\n    };\r\n    const app = new PIXI.Application(appOptions);\r\n    document.querySelector(config.root).appendChild(app.view);\r\n    this.app = app;\r\n\r\n    // loader for Screen\r\n    const loader = new PIXI.loaders.Loader();\r\n    this.loader = loader;\r\n\r\n    // Init screens\r\n    Object.entries(screens).forEach(([id, Screen]) => {\r\n      const screen = new Screen(this);\r\n      screen.update = screen.update.bind(screen);\r\n      this.screens[id] = screen;\r\n    });\r\n\r\n    // load all assets\r\n    loading.reset();\r\n    app.stage.addChild(loading);\r\n    loader.once('progress', onProgressAssets).load(onAssetsComplete);\r\n  }\r\n\r\n  loadScreen(id, cb) {\r\n    const { screens, app, currentScreen } = this;\r\n\r\n    const screen = screens[id];\r\n    if (!screen) throw new Error(`screen ${id} not found!`);\r\n\r\n    // change screen\r\n    if (currentScreen !== screen) {\r\n      app.stage.removeChild(currentScreen);\r\n      app.stage.addChild(screen);\r\n      // ticker\r\n      if (currentScreen) app.ticker.remove(currentScreen.update);\r\n      app.ticker.add(screen.update);\r\n      this.currentScreen = screen;\r\n    }\r\n\r\n    if (cb) cb(screen);\r\n  }\r\n\r\n  onProgressAssets(loader, resource) {\r\n    this.loading.progress(loader.progress, resource.url);\r\n  }\r\n\r\n  onAssetsComplete() {\r\n    const { loading, app, loadScreen } = this;\r\n    this.loading.progress(100);\r\n    app.stage.removeChild(loading);\r\n    // show main screen\r\n    loadScreen('game');\r\n    // loadScreen('paytable');\r\n  }\r\n\r\n  destroy() {\r\n    const { app, currentScreen, loader } = this;\r\n    currentScreen.destroy(true);\r\n    app.destroy(true);\r\n    loader.destroy();\r\n    this.currentScreen = null;\r\n    this.app = null;\r\n    Object.values(state.sounds).forEach(sound => sound.stop());\r\n    state.reset();\r\n  }\r\n}\r\n\r\nexport default SlotGame;\r\n","export default class Sound {\r\n  constructor(audio) {\r\n    this.audio = audio;\r\n    this.clones = [];\r\n  }\r\n\r\n  play(time = 0) {\r\n    const { audio } = this;\r\n    audio.pause();\r\n    audio.currentTime = time;\r\n    audio.play();\r\n  }\r\n\r\n  pause() {\r\n    const { audio } = this;\r\n    audio.pause();\r\n  }\r\n\r\n  loop() {\r\n    const { audio } = this;\r\n    audio.loop = true;\r\n    audio.play();\r\n  }\r\n\r\n  stop() {\r\n    const { audio } = this;\r\n    audio.currentTime = 0;\r\n    audio.loop = false;\r\n    audio.pause();\r\n  }\r\n\r\n  volume(value) {\r\n    const { audio } = this;\r\n    audio.volume = value;\r\n  }\r\n}\r\n","import * as PIXI from 'pixi.js';\r\nimport state from '../state';\r\n\r\nexport default class Button extends PIXI.Container {\r\n  constructor(value) {\r\n    super();\r\n\r\n    const style = new PIXI.TextStyle({\r\n      fontSize: 20,\r\n      fontWeight: 'bold',\r\n      stroke: '#4a1850',\r\n      strokeThickness: 5,\r\n      dropShadow: true,\r\n      dropShadowColor: '#000000',\r\n      dropShadowBlur: 3,\r\n      dropShadowAngle: Math.PI / 6,\r\n      dropShadowDistance: 1,\r\n    });\r\n\r\n    const button = new PIXI.Text(value, style);\r\n    this.addChild(button);\r\n\r\n    // handlers\r\n    this.on('pointertap', () => state.sounds.click.play());\r\n\r\n    // Members\r\n    this.button = button;\r\n\r\n    // Enabled by default\r\n    this.enable();\r\n  }\r\n\r\n  setFill(fill) {\r\n    const { button } = this;\r\n    button.style.fill = fill;\r\n  }\r\n\r\n  disable() {\r\n    const { button } = this;\r\n    this.buttonMode = false;\r\n    this.interactive = false;\r\n    button.style.fill = ['#ffffff', '#cccccc'];\r\n  }\r\n\r\n  enable() {\r\n    const { button } = this;\r\n    this.buttonMode = true;\r\n    this.interactive = true;\r\n    button.style.fill = ['#ffffff', '#00ff99'];\r\n  }\r\n\r\n  update() {}\r\n}\r\n","import * as PIXI from 'pixi.js';\r\nimport Button from './Button';\r\nimport { spaceAroundX } from '../helpers';\r\n\r\nexport default class Controls extends PIXI.Container {\r\n  constructor(width, height) {\r\n    super();\r\n    // Size\r\n    this.width = width;\r\n    this.height = height;\r\n\r\n    // Border\r\n    const border = new PIXI.Graphics();\r\n    const borderWidth = 5;\r\n    border.lineStyle(borderWidth, 0xdbeff7);\r\n    border.beginFill(0xc5defd, 0.5);\r\n    border.drawRect(0, 0, width, height);\r\n    this.addChild(border);\r\n\r\n    // Show paytable button\r\n    const btnPaytable = new Button('Paytable');\r\n    this.addChild(btnPaytable);\r\n\r\n    // Wager up button\r\n    const btnWagerUp = new Button(`UP`);\r\n    this.addChild(btnWagerUp);\r\n\r\n    // Wager down button\r\n    const btnWagerDown = new Button(`DOWN`);\r\n    this.addChild(btnWagerDown);\r\n\r\n    // Spin button\r\n    const btnSpin = new Button('Spin');\r\n    this.addChild(btnSpin);\r\n\r\n    // Auto spin button\r\n    const btnAutoSpin = new Button('Auto');\r\n    this.addChild(btnAutoSpin);\r\n\r\n    // Cheat spin button\r\n    const btnCheatSpin = new Button('Cheat');\r\n    this.addChild(btnCheatSpin);\r\n\r\n    // Positions\r\n    const elms = [btnPaytable, btnWagerDown, btnWagerUp, btnSpin, btnAutoSpin, btnCheatSpin];\r\n    spaceAroundX(width, height, ...elms);\r\n\r\n    // Members\r\n    this.btnSpin = btnSpin;\r\n    this.btnAutoSpin = btnAutoSpin;\r\n    this.btnCheatSpin = btnCheatSpin;\r\n    this.btnWagerUp = btnWagerUp;\r\n    this.btnWagerDown = btnWagerDown;\r\n    this.btnPaytable = btnPaytable;\r\n  }\r\n\r\n  update() {}\r\n}\r\n","import * as PIXI from 'pixi.js';\r\nimport Label from './Label';\r\nimport { spaceAroundX } from '../helpers';\r\n\r\nexport default class Info extends PIXI.Container {\r\n  constructor(width, height) {\r\n    super();\r\n    // Size\r\n    this.width = width;\r\n    this.height = height;\r\n\r\n    // Border\r\n    const border = new PIXI.Graphics();\r\n    const borderWidth = 5;\r\n    border.lineStyle(borderWidth, 0xdbeff7);\r\n    border.beginFill(0xfff000, 0.5);\r\n    border.drawRect(0, 0, width, height);\r\n    this.addChild(border);\r\n\r\n    // Balance\r\n    const balanceLabel = new Label(`Balance: 0`);\r\n    this.addChild(balanceLabel);\r\n\r\n    // Win\r\n    const winLabel = new Label(`Win: 0`);\r\n    this.addChild(winLabel);\r\n\r\n    // Wager\r\n    const wagerLabel = new Label(`Wager: 0`);\r\n    this.addChild(wagerLabel);\r\n\r\n    // Positions\r\n    const elms = [balanceLabel, wagerLabel, winLabel];\r\n    spaceAroundX(width, height, ...elms);\r\n\r\n    // Members\r\n    this.balanceLabel = balanceLabel;\r\n    this.winLabel = winLabel;\r\n    this.wagerLabel = wagerLabel;\r\n  }\r\n\r\n  update() {}\r\n}\r\n","import * as PIXI from 'pixi.js';\r\n\r\nexport default class Label extends PIXI.Text {\r\n  constructor(value) {\r\n    super(value);\r\n\r\n    const style = new PIXI.TextStyle({\r\n      fontSize: 18,\r\n      fill: ['#dbeff7', '#a5d9ec'],\r\n      stroke: '#666666',\r\n      strokeThickness: 1,\r\n      dropShadow: true,\r\n      dropShadowColor: '#000000',\r\n      dropShadowBlur: 2,\r\n      dropShadowAngle: Math.PI / 6,\r\n      dropShadowDistance: 1,\r\n    });\r\n\r\n    this.style = style;\r\n  }\r\n\r\n  update() {}\r\n}\r\n","import * as PIXI from 'pixi.js';\r\n\r\nexport default class Loading extends PIXI.Container {\r\n  constructor(width = 250, height = 60) {\r\n    super();\r\n\r\n    this.width = width;\r\n    this.height = height;\r\n\r\n    // frame\r\n    const frame = new PIXI.Graphics();\r\n    frame.beginFill(0xc5defd);\r\n    frame.drawRect(0, 0, width, height);\r\n    frame.endFill();\r\n    this.addChild(frame);\r\n\r\n    // progress bar container\r\n    const progressContainer = new PIXI.Graphics();\r\n    progressContainer.beginFill(0x6897bb);\r\n    progressContainer.drawRect(0, 0, width, 30);\r\n    progressContainer.endFill();\r\n    frame.addChild(progressContainer);\r\n\r\n    // progress bar\r\n    const progressBar = new PIXI.Graphics();\r\n    progressBar.beginFill(0x3c627e);\r\n    progressBar.drawRect(0, 0, progressContainer.width, progressContainer.height);\r\n    progressBar.endFill();\r\n    // progressBar.position.set(0, 0);\r\n    progressBar.width = 0;\r\n    progressContainer.addChild(progressBar);\r\n\r\n    // progress text\r\n    const progressStyle = new PIXI.TextStyle({\r\n      fontWeight: 'bold',\r\n      fontSize: progressContainer.height * 0.75,\r\n      lineHeight: progressContainer.height * 0.75,\r\n      fill: '#fff',\r\n    });\r\n    const progressText = new PIXI.Text('0%', progressStyle);\r\n    progressText.y = (progressContainer.height - progressText.height) / 2;\r\n    progressContainer.addChild(progressText);\r\n\r\n    // current loading asset\r\n    const assetStyle = new PIXI.TextStyle({\r\n      fontSize: 15,\r\n      wordWrap: true,\r\n      wordWrapWidth: frame.width,\r\n      align: 'center',\r\n    });\r\n    const assetText = new PIXI.Text('', assetStyle);\r\n    frame.addChild(assetText);\r\n    assetText.x = 0;\r\n    assetText.y = progressContainer.height + 10;\r\n\r\n    // Members\r\n    this.assetText = assetText;\r\n    this.progressContainer = progressContainer;\r\n    this.progressText = progressText;\r\n    this.progressBar = progressBar;\r\n  }\r\n\r\n  progress(percent, assetName = '') {\r\n    const { assetText, progressContainer, progressBar, progressText } = this;\r\n    assetText.text = `${assetName}`;\r\n    progressText.text = `${percent.toFixed()}%`;\r\n    progressText.x = (progressContainer.width - progressText.width) / 2;\r\n    progressBar.width = (this.progressContainer.width * percent) / 100;\r\n  }\r\n\r\n  reset() {\r\n    this.progress(0);\r\n  }\r\n}\r\n","import * as PIXI from 'pixi.js';\r\nimport Label from './Label';\r\nimport Button from './Button';\r\nimport { spaceAroundX } from '../helpers';\r\nimport state from '../state';\r\n\r\nexport default class Paylines extends PIXI.Container {\r\n  constructor(slotWidth, slotHeight) {\r\n    super();\r\n    // Size\r\n    const panelHeight = 30;\r\n    this.width = slotWidth;\r\n    this.height = slotHeight + panelHeight;\r\n\r\n    // container for paths\r\n    const container = new PIXI.Graphics();\r\n    container.beginFill(0xfff000, 0.01);\r\n    container.drawRect(0, 0, slotWidth, slotHeight);\r\n    this.addChild(container);\r\n\r\n    // panel\r\n    const panel = new PIXI.Container();\r\n    panel.width = slotWidth;\r\n    panel.height = panelHeight;\r\n    panel.y = container.y + slotHeight;\r\n    this.addChild(panel);\r\n\r\n    // Border\r\n    const border = new PIXI.Graphics();\r\n    const borderWidth = 5;\r\n    border.lineStyle(borderWidth, 0xdbeff7);\r\n    border.beginFill(0xb7b7ff, 0.5);\r\n    border.drawRect(0, 0, slotWidth, panelHeight);\r\n    panel.addChild(border);\r\n\r\n    // Payline label\r\n    const paylinesLabel = new Label(`Paylines:`);\r\n    panel.addChild(paylinesLabel);\r\n\r\n    // bindings\r\n    this.togglePayline = this.togglePayline.bind(this);\r\n\r\n    // Members\r\n    this.container = container;\r\n    this.panel = panel;\r\n    this.paths = [];\r\n    this.buttons = [];\r\n\r\n    // Gen buttons and paths\r\n    this.generateElements();\r\n\r\n    // Positions\r\n    const elms = [paylinesLabel, ...this.buttons];\r\n    spaceAroundX(slotWidth, panelHeight, ...elms);\r\n  }\r\n\r\n  generateElements() {\r\n    const { panel, buttons, paths } = this;\r\n    state.paylines.forEach((payline, index) => {\r\n      // button\r\n      const btn = new Button(`#${index}`);\r\n      btn.on('pointertap', () => this.togglePayline(index));\r\n      panel.addChild(btn);\r\n      buttons.push(btn);\r\n      // paths\r\n      const path = this.createPathLine(payline);\r\n      paths.push(path);\r\n    });\r\n    this.updatePathAndBottonsStatus();\r\n  }\r\n\r\n  createPathLine(payline) {\r\n    const { paths, container } = this;\r\n    const { reels, lines } = state;\r\n    const slotWidth = container.width;\r\n    const slotHeight = container.height;\r\n    const tileWidth = slotWidth / reels;\r\n    const tileHeight = slotHeight / lines;\r\n\r\n    // colors path\r\n    const pathColors = [0xff0000, 0x00ff00, 0x0000ff, 0x000000, 0xa821f9, 0xed8b00, 0x75b1d6];\r\n\r\n    // path\r\n    const path = new PIXI.Graphics();\r\n    // path.beginFill(0xff3300);\r\n    const first = payline[0];\r\n    const startX = tileWidth / 2 - 1;\r\n    const startY = first * tileHeight + tileHeight / 2;\r\n    const color = pathColors[paths.length % pathColors.length];\r\n    path.lineStyle(6, color);\r\n    path.moveTo(startX, startY);\r\n    payline.forEach((pos, i) => {\r\n      const x = i * tileWidth + tileWidth / 2;\r\n      const y = pos * tileHeight + tileHeight / 2;\r\n      path.lineTo(x, y);\r\n    });\r\n    path.endFill();\r\n    return path;\r\n  }\r\n\r\n  // eslint-disable-next-line class-methods-use-this\r\n  togglePayline(index) {\r\n    const { activePaylines } = state;\r\n    const found = activePaylines.findIndex(i => i === index);\r\n    // add\r\n    if (found !== -1) activePaylines.splice(found, 1);\r\n    else activePaylines.push(index);\r\n\r\n    this.updatePathAndBottonsStatus();\r\n  }\r\n\r\n  updatePathAndBottonsStatus() {\r\n    const { paths, buttons, container } = this;\r\n    const { activePaylines } = state;\r\n    //\r\n    paths.forEach((path, index) => {\r\n      const isActive = activePaylines.includes(index);\r\n      if (isActive) {\r\n        container.addChild(path);\r\n        buttons[index].setFill(['#ffffff', '#00ff99']);\r\n      } else {\r\n        container.removeChild(path);\r\n        buttons[index].setFill(['#ffffff', '#cccccc']);\r\n      }\r\n    });\r\n  }\r\n\r\n  update() {}\r\n}\r\n","import * as PIXI from 'pixi.js';\r\nimport Label from './Label';\r\nimport Tile from './Tile';\r\nimport state from '../state';\r\n\r\nexport default class Paytable extends PIXI.Container {\r\n  constructor(width, height) {\r\n    super();\r\n\r\n    const { activeMultipliers } = state;\r\n\r\n    // Border\r\n    const border = new PIXI.Graphics();\r\n    border.lineStyle(5, 0xdbeff7);\r\n    const padding = 1;\r\n    border.drawRect(0, 0, width * padding, height * padding);\r\n    this.addChild(border);\r\n\r\n    // create blocks\r\n    const elements = activeMultipliers.map(data => this.createBlock(data));\r\n    // const maxRows = Math.floor(height / elements[0].heigt);\r\n    elements.forEach((el, i) => {\r\n      el.y = (el.height * i) % height;\r\n      el.x = Math.floor((el.height * i) / height) * (el.width + 40);\r\n      this.addChild(el);\r\n    });\r\n  }\r\n\r\n  // eslint-disable-next-line class-methods-use-this\r\n  createBlock({ symbolIndex, matches, multiplier }) {\r\n    const { symbols } = state;\r\n\r\n    const width = 30;\r\n    const height = 30;\r\n\r\n    const container = new PIXI.Container();\r\n\r\n    // tile\r\n    const tileData = { ...symbols[symbolIndex], width, height };\r\n    const tile = new Tile(tileData);\r\n    container.addChild(tile);\r\n\r\n    // label\r\n    const label = new Label(` x ${matches} \\t = wage * ${multiplier}`);\r\n    label.x = width + 10;\r\n    label.y = (height - label.height) / 2;\r\n    container.addChild(label);\r\n\r\n    return container;\r\n  }\r\n}\r\n","import * as PIXI from 'pixi.js';\r\nimport Tile from './Tile';\r\nimport state from '../state';\r\n\r\nexport default class Reel extends PIXI.Container {\r\n  constructor(options) {\r\n    super();\r\n\r\n    const { width, height, lines } = options;\r\n    const { symbols } = state;\r\n\r\n    // validate options\r\n    if (lines < 3) throw new Error(`The minimum number of lines is 3`);\r\n    if (symbols.length < 3) throw new Error(`The minimum number of symbols is 3`);\r\n\r\n    // Border\r\n    const border = new PIXI.Graphics();\r\n    border.lineStyle(5, 0xdbeff7);\r\n    const padding = 1;\r\n    border.drawRect(0, 0, width * padding, height * padding);\r\n    this.addChild(border);\r\n\r\n    // Mask\r\n    const mask = new PIXI.Graphics();\r\n    mask.beginFill(0);\r\n    mask.drawRect(0, 0, width, height);\r\n    mask.endFill();\r\n    this.addChild(mask);\r\n\r\n    // Container with mask\r\n    const container = new PIXI.Container();\r\n    container.mask = mask;\r\n    this.addChild(container);\r\n\r\n    // filter\r\n    const blurFilter = new PIXI.filters.BlurYFilter();\r\n    blurFilter.strength = 0;\r\n    this.filters = [blurFilter];\r\n\r\n    // Members\r\n    this.result = null;\r\n    this.lines = lines;\r\n    this.tiles = [];\r\n    this.tileWidth = width;\r\n    this.tileHeight = height / lines;\r\n    this.speed = 20;\r\n    this.isSpining = false;\r\n    this.isStopping = false;\r\n    this.container = container;\r\n    this.blurFilter = blurFilter;\r\n\r\n    this.createTiles();\r\n  }\r\n\r\n  createTiles() {\r\n    const { lines, container, tileWidth, tileHeight } = this;\r\n    const { symbols } = state;\r\n\r\n    // +2 for circular rotation\r\n    for (let i = 0; i < lines + 2; i += 1) {\r\n      // first visible tile has symbol index = 0\r\n      const symbolIndex = Math.abs(i - 1) % lines;\r\n      // create tile\r\n      const tileData = { ...symbols[symbolIndex], width: tileWidth, height: tileHeight };\r\n      const tile = new Tile(tileData);\r\n      tile.y = i * tileHeight - tileHeight;\r\n      container.addChild(tile);\r\n      this.tiles.push(tile);\r\n    }\r\n  }\r\n\r\n  spin(result) {\r\n    const { blurFilter } = this;\r\n    console.log(`Reel.spin:: result: ${result}`);\r\n\r\n    // filter\r\n    blurFilter.strength = 0;\r\n\r\n    // set state\r\n    this.result = result;\r\n    this.isSpining = true;\r\n  }\r\n\r\n  stop() {\r\n    this.isStopping = true;\r\n  }\r\n\r\n  onSpinComplete() {\r\n    // filter\r\n    this.blurFilter.strength = 0;\r\n\r\n    // set state\r\n    this.isSpining = false;\r\n    this.isStopping = false;\r\n    this.emit('reelspincomplete', this);\r\n  }\r\n\r\n  changeTile(tile) {\r\n    const { result, isStopping } = this;\r\n    const { symbols } = state;\r\n\r\n    // change to symbol\r\n    const index = isStopping ? result.pop() : Math.floor(Math.random() * symbols.length);\r\n\r\n    const nextTile = symbols[index];\r\n    tile.id = nextTile.id;\r\n    tile.sprite.texture = nextTile.texture;\r\n  }\r\n\r\n  getSpeed(delta) {\r\n    const { result, container } = this;\r\n\r\n    let speed = delta * this.speed;\r\n\r\n    // correct final position\r\n    if (!result.length) {\r\n      speed = 0 - container.children[0].y;\r\n    }\r\n\r\n    return speed;\r\n  }\r\n\r\n  update(delta) {\r\n    const { isSpining, tiles, lines, tileHeight, container, result } = this;\r\n\r\n    if (!isSpining) return;\r\n\r\n    // move tiles\r\n    const speed = this.getSpeed(delta);\r\n    tiles.forEach(tile => {\r\n      tile.y += speed;\r\n    });\r\n\r\n    // if it's final position\r\n    if (!result.length) {\r\n      this.onSpinComplete();\r\n      return;\r\n    }\r\n\r\n    // filter\r\n    this.blurFilter.strength = speed * 0.3;\r\n\r\n    // circular\r\n    const maxY = tileHeight * lines + tileHeight;\r\n    tiles.forEach(tile => {\r\n      if (tile.y + container.y > maxY) {\r\n        // move tile to top\r\n        tile.y = container.children[0].y - tileHeight;\r\n        container.addChildAt(tile, 0);\r\n        // and change\r\n        this.changeTile(tile);\r\n      }\r\n    });\r\n  }\r\n}\r\n","import * as PIXI from 'pixi.js';\r\nimport Reel from './Reel';\r\nimport state from '../state';\r\n\r\nexport default class Slot extends PIXI.Container {\r\n  constructor(options) {\r\n    super();\r\n\r\n    const { width, height, reels, lines, spinTime = 1500, stopDelay = 400 } = options;\r\n\r\n    // validate options\r\n    if (!width || !height) throw new Error(`No width and height specified`);\r\n    if (!reels || reels < 3) throw new Error(`The minimum number of reels is 3`);\r\n\r\n    // Members\r\n    this.reels = [];\r\n    this.currentReel = null;\r\n    this.result = null;\r\n    this.isSpining = false;\r\n    this.spinTime = spinTime;\r\n    this.stopDelay = stopDelay;\r\n\r\n    // Binding\r\n    this.onReelSpinComplete = this.onReelSpinComplete.bind(this);\r\n\r\n    // create reels\r\n    const reelWidth = width / reels;\r\n    for (let i = 0; i < reels; i += 1) {\r\n      const reel = new Reel({\r\n        width: reelWidth,\r\n        height,\r\n        lines,\r\n      });\r\n      reel.x = i * reelWidth;\r\n      this.addChild(reel);\r\n      reel.on('reelspincomplete', this.onReelSpinComplete);\r\n      this.reels.push(reel);\r\n    }\r\n  }\r\n\r\n  onReelSpinComplete() {\r\n    const { reels, result, stopDelay } = this;\r\n    this.currentReel += 1;\r\n    state.sounds.change.play();\r\n\r\n    // stop next reel\r\n    if (this.currentReel < reels.length) {\r\n      setTimeout(() => reels[this.currentReel].stop(), stopDelay);\r\n      return;\r\n    }\r\n\r\n    // all reels completed\r\n    this.currentReel = 0;\r\n    this.isSpining = false;\r\n    state.sounds.spining.stop();\r\n    this.emit('slotspincomplete', result);\r\n  }\r\n\r\n  isCorrectResult(result) {\r\n    const { reels, lines } = this;\r\n    const isEqualReels = result.length === reels;\r\n    const isEqualLines = result[0].length === lines;\r\n    return isEqualReels && isEqualLines;\r\n  }\r\n\r\n  spinReels(result) {\r\n    const { reels, spinTime, isSpining } = this;\r\n\r\n    console.log(`Slot.spinReels:: result:`);\r\n    console.log(result.map(line => `${line.join()}\\n`).join(``));\r\n\r\n    if (isSpining) return;\r\n\r\n    // Check result array\r\n    if (this.isCorrectResult(result)) {\r\n      throw new Error(`Result array is incorrect`);\r\n    }\r\n\r\n    // set states\r\n    this.isSpining = true;\r\n    this.currentReel = 0;\r\n    this.result = result;\r\n    state.sounds.spining.volume(0.1);\r\n    state.sounds.spining.loop();\r\n\r\n    // start spin\r\n    reels.forEach((reel, i) => {\r\n      const reelResult = result.map(row => row[i]);\r\n      reel.spin(reelResult);\r\n    });\r\n    this.emit('slotspininit');\r\n\r\n    // stop\r\n    setTimeout(() => this.stopReels(), spinTime);\r\n  }\r\n\r\n  stopReels() {\r\n    const { reels } = this;\r\n    reels[0].stop();\r\n  }\r\n\r\n  update(delta) {\r\n    this.reels.forEach(reel => reel.update(delta));\r\n  }\r\n}\r\n","import * as PIXI from 'pixi.js';\r\n\r\nexport default class Tile extends PIXI.Container {\r\n  constructor(options) {\r\n    super();\r\n\r\n    const { id, texture, width, height } = options;\r\n\r\n    // validate options\r\n    if (!id) throw new Error(`id is needed to create a symbol`);\r\n    if (!texture) throw new Error(`texture is needed to create a symbol`);\r\n    if (!width || !height) throw new Error(`width and height are needed to create a symbol`);\r\n\r\n    // create sprite\r\n    const sprite = new PIXI.Sprite();\r\n    // scaling\r\n    const ratio = Math.min(width / texture.orig.width, height / texture.orig.height) * 0.9;\r\n    sprite.scale.set(ratio, ratio);\r\n    sprite.anchor.set(0.5, 0.5);\r\n    sprite.position.set(width * 0.5, height * 0.5);\r\n    sprite.texture = texture;\r\n    this.addChild(sprite);\r\n\r\n    // Members\r\n    this.id = id;\r\n    this.sprite = sprite;\r\n  }\r\n\r\n  update() {}\r\n}\r\n","export function spaceAroundX(width, height, ...elms) {\r\n  const sumWidth = elms.reduce((sum, el) => sum + el.width, 0);\r\n  const margin = (width - sumWidth) / elms.length;\r\n  // element positioning\r\n  for (let i = 0, offset = 0; i < elms.length; i += 1) {\r\n    const el = elms[i];\r\n    el.x = offset + margin / 2;\r\n    el.y = (height - el.height) / 2;\r\n    offset += el.width + margin;\r\n  }\r\n}\r\n\r\nexport function spaceAroundY(width, height, ...elms) {\r\n  const sumHeight = elms.reduce((sum, el) => sum + el.height, 0);\r\n  const margin = (height - sumHeight) / elms.length;\r\n  // element positioning\r\n  for (let i = 0, offset = 0; i < elms.length; i += 1) {\r\n    const el = elms[i];\r\n    el.y = offset + margin / 2;\r\n    el.x = (width - el.width) / 2;\r\n    offset += el.height + margin;\r\n  }\r\n}\r\n\r\nexport default { spaceAroundX, spaceAroundY };\r\n","import SlotGame from './SlotGame';\r\n\r\nexport default SlotGame;\r\n","import * as PIXI from 'pixi.js';\r\nimport Screen from './Screen';\r\nimport Label from '../components/Label';\r\nimport Button from '../components/Button';\r\nimport { spaceAroundY } from '../helpers';\r\n\r\nexport default class GameOverScreen extends Screen {\r\n  constructor(ctx) {\r\n    super(ctx);\r\n    this.loader.once('complete', () => this.init());\r\n  }\r\n\r\n  init() {\r\n    const { config, app } = this;\r\n    const width = 200;\r\n    const height = 100;\r\n\r\n    // frame\r\n    const frame = new PIXI.Graphics();\r\n    frame.beginFill(0xc5defd);\r\n    frame.drawRect(0, 0, width, height);\r\n    frame.endFill();\r\n    frame.x = (app.screen.width - width) / 2;\r\n    frame.y = (app.screen.height - height) / 2;\r\n    this.addChild(frame);\r\n\r\n    // label\r\n    const label = new Label('Game over!');\r\n    label.style.fontSize = 30;\r\n    label.y = (height - label.height) / 2;\r\n    frame.addChild(label);\r\n\r\n    // button\r\n    const button = new Button('Restart');\r\n    button.y = (height - button.height) / 2;\r\n    frame.addChild(button);\r\n\r\n    // restart game\r\n    button.on('pointertap', () => {\r\n      this.loadScreen('game', game => {\r\n        game.balance = config.balance;\r\n      });\r\n    });\r\n\r\n    // Positions\r\n    const elms = [label, button];\r\n    spaceAroundY(width, height, ...elms);\r\n\r\n    // Members\r\n    this.label = label;\r\n    this.button = button;\r\n  }\r\n}\r\n","// import * as PIXI from 'pixi.js';\r\nimport Screen from './Screen';\r\nimport Slot from '../components/Slot';\r\nimport Info from '../components/Info';\r\nimport Controls from '../components/Controls';\r\nimport Paylines from '../components/Paylines';\r\nimport Sound from '../Sound';\r\nimport paylinesData from '../data/paylines.json';\r\nimport state from '../state';\r\n\r\nexport default class GameScreen extends Screen {\r\n  constructor(ctx) {\r\n    super(ctx);\r\n\r\n    // Members\r\n    this.autoSpinValue = false;\r\n    this.balanceValue = null;\r\n    this.wagerValue = null;\r\n    this.winValue = null;\r\n\r\n    // Elements\r\n    this.paylines = null;\r\n    this.slot = null;\r\n    this.paylinesPanel = null;\r\n    this.info = null;\r\n    this.controls = null;\r\n\r\n    // Binding\r\n    this.init = this.init.bind(this);\r\n    this.wagerUp = this.wagerUp.bind(this);\r\n    this.wagerDown = this.wagerDown.bind(this);\r\n    this.spin = this.spin.bind(this);\r\n    this.spinAuto = this.spinAuto.bind(this);\r\n    this.cheatSpin = this.cheatSpin.bind(this);\r\n    this.updateButtonStatus = this.updateButtonStatus.bind(this);\r\n    this.onSpinComplete = this.onSpinComplete.bind(this);\r\n\r\n    // Load assets\r\n    // PIXI.loader\r\n    this.loader\r\n      // add assets\r\n      .add([\r\n        { name: 'click', url: 'assets/sounds/click.mp3' }, //\r\n        { name: 'change', url: 'assets/sounds/change.mp3' },\r\n        { name: 'spining', url: 'assets/sounds/spining.mp3' },\r\n        { name: 'victory', url: 'assets/sounds/victory.mp3' },\r\n        { name: 'gameover', url: 'assets/sounds/gameover.mp3' },\r\n      ])\r\n      .add('symbols', 'assets/symbols.json')\r\n      .once('complete', this.init);\r\n  }\r\n\r\n  init() {\r\n    const { config } = this;\r\n\r\n    // Calc size of elements\r\n    const marginY = 10;\r\n    const marginX = 10;\r\n    const panelWidth = config.width - 20;\r\n    const panelHeight = 40;\r\n    const slotWidth = config.width * 0.69;\r\n    const slotHeight = config.height - panelHeight * 3 - marginY * 7;\r\n\r\n    // Data preparation\r\n    this.initSymbols();\r\n    this.initSounds();\r\n    this.initPaylines();\r\n    this.initMultipliers();\r\n\r\n    // Create panels\r\n    const slot = this.createSlot(slotWidth, slotHeight);\r\n    const paylines = this.createPaylines(slotWidth, slotHeight);\r\n    const info = this.createInfo(panelWidth, panelHeight);\r\n    const controls = this.createControls(panelWidth, panelHeight);\r\n\r\n    // Positions\r\n    slot.position.set((config.width - slotWidth) / 2, marginY);\r\n    paylines.position.set(slot.x, slot.y);\r\n    // info.position.set(marginX, paylines.y + paylines.height + marginY);\r\n    info.position.set(marginX, slot.y + slot.height + panelHeight + marginY);\r\n    controls.position.set(marginX, info.y + info.height + marginY);\r\n\r\n    // Members\r\n    this.slot = slot;\r\n    this.paylines = paylines;\r\n    this.info = info;\r\n    this.controls = controls;\r\n\r\n    // set initial values\r\n    this.balance = config.balance;\r\n    this.wager = config.wager;\r\n    this.win = 0;\r\n    this.autoSpinMode = false;\r\n\r\n    // init event\r\n    this.emit('init');\r\n  }\r\n\r\n  initSymbols() {\r\n    // assets\r\n    state.symbols = [];\r\n    // const sheet = PIXI.loader.resources.symbols;\r\n    const sheet = this.loader.resources.symbols;\r\n\r\n    // use textures from assets\r\n    Object.entries(sheet.textures).forEach(([id, texture]) => {\r\n      state.symbols.push({ id, texture });\r\n    });\r\n  }\r\n\r\n  initSounds() {\r\n    // // use textures from assets\r\n    Object.values(this.loader.resources)\r\n      .filter(asset => asset.isAudio)\r\n      .forEach(asset => {\r\n        state.sounds[asset.name] = new Sound(asset.data);\r\n      });\r\n  }\r\n\r\n  initMultipliers() {\r\n    const { config } = this;\r\n    const { multipliers, symbols } = state;\r\n\r\n    state.activeMultipliers = [];\r\n\r\n    // get actual multipliers\r\n    const actual = [];\r\n    Object.entries(multipliers).forEach(([symbolId, data]) => {\r\n      const symbolIndex = symbols.findIndex(s => s.id === symbolId);\r\n      const factors = Object.entries(data).filter(([matches]) => +matches <= config.lines);\r\n      if (factors) {\r\n        factors.forEach(([matches, multiplier]) => {\r\n          actual.push({ symbolIndex, matches, multiplier });\r\n        });\r\n      }\r\n    });\r\n    state.activeMultipliers = actual;\r\n  }\r\n\r\n  initPaylines() {\r\n    const { config } = this;\r\n\r\n    state.paylines = [];\r\n\r\n    // find paylines for current game size\r\n    const found = paylinesData.find(\r\n      data => data.reels === config.reels && data.lines === config.lines\r\n    );\r\n\r\n    if (!found) {\r\n      throw new Error(`Paylines for current game size not found`);\r\n    }\r\n\r\n    state.paylines.push(...found.paylines);\r\n  }\r\n\r\n  createSlot(width, height) {\r\n    const { config, onSpinComplete, updateButtonStatus } = this;\r\n    const slot = new Slot({\r\n      ...config,\r\n      width,\r\n      height,\r\n    });\r\n\r\n    // handlers\r\n    slot.on('slotspincomplete', onSpinComplete);\r\n    slot.on('slotspininit', updateButtonStatus);\r\n\r\n    return this.addChild(slot);\r\n  }\r\n\r\n  createPaylines(width, height) {\r\n    const paylines = new Paylines(width, height);\r\n    return this.addChild(paylines);\r\n  }\r\n\r\n  createInfo(width, height) {\r\n    const info = new Info(width, height);\r\n    return this.addChild(info);\r\n  }\r\n\r\n  createControls(width, height) {\r\n    const { spin, spinAuto, cheatSpin, wagerUp, wagerDown, loadScreen } = this;\r\n\r\n    const controls = new Controls(width, height);\r\n\r\n    // handlers\r\n    controls.btnSpin.on('pointertap', spin);\r\n    controls.btnAutoSpin.on('pointertap', spinAuto);\r\n    controls.btnCheatSpin.on('pointertap', cheatSpin);\r\n    controls.btnWagerUp.on('pointertap', wagerUp);\r\n    controls.btnWagerDown.on('pointertap', wagerDown);\r\n    controls.btnPaytable.on('pointertap', () => {\r\n      loadScreen('paytable');\r\n    });\r\n\r\n    return this.addChild(controls);\r\n  }\r\n\r\n  analyseResult(result) {\r\n    const { wager } = this;\r\n    const { activePaylines, paylines, symbols, multipliers } = state;\r\n\r\n    const winPaylines = {};\r\n\r\n    activePaylines.forEach(paylineIndex => {\r\n      const payline = paylines[paylineIndex];\r\n      if (!payline) return;\r\n\r\n      // number of repetitions per line\r\n      const stats = payline\r\n        .map((pos, i) => result[pos][i]) //\r\n        .reduce((res, symbIndex) => {\r\n          res[symbIndex] = res[symbIndex] ? res[symbIndex] + 1 : 1;\r\n          return res;\r\n        }, {});\r\n\r\n      console.log(`\r\n        payline = ${payline}\r\n        stats:: ${Object.entries(stats).join(' | ')}\r\n        `);\r\n\r\n      // check win\r\n      Object.entries(stats).forEach(([symbolIndex, repetitions]) => {\r\n        //\r\n        const symbolId = symbols[symbolIndex].id;\r\n        const multiplier = multipliers[symbolId][repetitions];\r\n\r\n        // if win\r\n        if (multiplier) {\r\n          const prevSum = winPaylines[paylineIndex] || 0;\r\n          const win = multiplier * wager;\r\n          winPaylines[paylineIndex] = prevSum + win;\r\n          console.log(\r\n            `win:: symbolId: ${symbolId}, m: ${multiplier}, win: ${win}, prevSum: ${prevSum}`\r\n          );\r\n        }\r\n      });\r\n    });\r\n\r\n    // cacl sum\r\n    let totalWin = 0;\r\n    Object.entries(winPaylines).forEach(([, /* paylineIndex */ sum]) => {\r\n      totalWin += sum;\r\n    });\r\n\r\n    return totalWin;\r\n  }\r\n\r\n  onSpinComplete(result) {\r\n    const { autoSpinMode, spin } = this;\r\n\r\n    // get win paylines\r\n    console.log(`GameScreen.onSpinComplete:: result: ${result}`);\r\n    const totalWin = this.analyseResult(result);\r\n    if (totalWin) {\r\n      this.win = totalWin;\r\n      state.sounds.victory.play();\r\n    }\r\n    this.updateButtonStatus();\r\n\r\n    // game over\r\n    if (this.balance < this.config.wager) {\r\n      this.loadScreen('gameover');\r\n      state.sounds.gameover.play();\r\n      return;\r\n    }\r\n\r\n    // autospin\r\n    if (autoSpinMode) setTimeout(spin, state.autoSpinDelay);\r\n  }\r\n\r\n  genRandomResult() {\r\n    const { config } = this;\r\n    const { symbols } = state;\r\n\r\n    const result = [];\r\n    // generation of random indexes of symbols array\r\n    for (let i = 0; i < config.lines; i += 1) {\r\n      result[i] = [];\r\n      for (let j = 0; j < config.reels; j += 1) {\r\n        const index = Math.floor(Math.random() * symbols.length);\r\n        result[i][j] = index;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  genSuccessedResult() {\r\n    const { config } = this;\r\n    const { symbols, activePaylines, paylines } = state;\r\n\r\n    const result = [];\r\n    const activeIndex = Math.floor(Math.random() * activePaylines.length);\r\n    const paylineIndex = activePaylines[activeIndex]\r\n    const winPayline = paylines[paylineIndex] || [];\r\n    const winSymbolIndex = Math.floor(Math.random() * symbols.length);\r\n    console.log(`winPayline: ${winPayline}`);\r\n    // gen\r\n    for (let i = 0; i < config.lines; i += 1) {\r\n      result[i] = [];\r\n      for (let j = 0; j < config.reels; j += 1) {\r\n        const index =\r\n          i === winPayline[j] ? winSymbolIndex : Math.floor(Math.random() * symbols.length);\r\n        result[i][j] = index;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  spinAuto() {\r\n    const { slot, autoSpinMode } = this;\r\n    this.autoSpinMode = !autoSpinMode;\r\n    // Run\r\n    if (!slot.isSpining) this.spin();\r\n  }\r\n\r\n  cheatSpin() {\r\n    const { slot, balance, wager } = this;\r\n    if (slot.isSpining) return;\r\n\r\n    if (balance >= wager) {\r\n      this.balance -= this.wager;\r\n      this.win = 0;\r\n      const result = this.genSuccessedResult();\r\n      slot.spinReels(result);\r\n    }\r\n  }\r\n\r\n  spin() {\r\n    const { slot, balance, wager } = this;\r\n    if (slot.isSpining) return;\r\n\r\n    if (balance >= wager) {\r\n      this.balance -= this.wager;\r\n      this.win = 0;\r\n      const result = this.genRandomResult();\r\n      slot.spinReels(result);\r\n    }\r\n  }\r\n\r\n  wagerUp() {\r\n    const { config } = this;\r\n    this.wager += config.wagerStep;\r\n  }\r\n\r\n  wagerDown() {\r\n    const { config } = this;\r\n    this.wager -= config.wagerStep;\r\n  }\r\n\r\n  update(delta) {\r\n    const { slot /* controls */ } = this;\r\n    if (slot) slot.update(delta);\r\n    // if (info) info.update(delta);\r\n    // if (controls) controls.update(delta);\r\n  }\r\n\r\n  get balance() {\r\n    return this.balanceValue;\r\n  }\r\n\r\n  set balance(value) {\r\n    const { config, info } = this;\r\n    // set balance\r\n    this.balanceValue = value;\r\n    info.balanceLabel.text = `Balance: ${value}`;\r\n\r\n    // decrease wager\r\n    if (value < this.wager) {\r\n      this.wager = config.wager;\r\n    }\r\n    this.updateButtonStatus();\r\n  }\r\n\r\n  get wager() {\r\n    return this.wagerValue;\r\n  }\r\n\r\n  set wager(value) {\r\n    const { config, info, balance } = this;\r\n    if (value <= balance && value <= config.maxWager && value >= config.wager) {\r\n      this.wagerValue = value;\r\n      info.wagerLabel.text = `Wager: ${value}`;\r\n    }\r\n    this.updateButtonStatus();\r\n  }\r\n\r\n  updateButtonStatus() {\r\n    const { config, balance, wager, slot, controls } = this;\r\n    const { btnSpin, btnCheatSpin, btnWagerUp, btnWagerDown } = controls;\r\n\r\n    // btnWagerUp availability\r\n    if (slot.isSpining || balance < wager + config.wagerStep || wager === config.maxWager)\r\n      btnWagerUp.disable();\r\n    else btnWagerUp.enable();\r\n\r\n    // btnWagerDown availability\r\n    if (slot.isSpining || balance < wager || wager <= config.wager) btnWagerDown.disable();\r\n    else btnWagerDown.enable();\r\n\r\n    // btnSpin availability\r\n    if (slot.isSpining || balance <= 0) btnSpin.disable();\r\n    else btnSpin.enable();\r\n\r\n    // btnSpin availability\r\n    if (slot.isSpining || balance <= 0) btnCheatSpin.disable();\r\n    else btnCheatSpin.enable();\r\n\r\n    // game over\r\n    if (balance <= 0) {\r\n      this.autoSpinMode = false;\r\n    }\r\n  }\r\n\r\n  get win() {\r\n    return this.winValue;\r\n  }\r\n\r\n  set win(value) {\r\n    const { info } = this;\r\n    this.winValue = value;\r\n    this.balance += value;\r\n    info.winLabel.text = `Win: ${value}`;\r\n  }\r\n\r\n  get autoSpinMode() {\r\n    return this.autoSpinValue;\r\n  }\r\n\r\n  set autoSpinMode(value) {\r\n    const { controls } = this;\r\n    this.autoSpinValue = !!value;\r\n    // set button fill\r\n    const fill = this.autoSpinValue ? ['#ffffff', '#00ff99'] : ['#ffffff', '#cccccc'];\r\n    controls.btnAutoSpin.setFill(fill);\r\n  }\r\n}\r\n","import * as PIXI from 'pixi.js';\r\nimport Screen from './Screen';\r\nimport Paylable from '../components/Paytable';\r\nimport Label from '../components/Label';\r\nimport Button from '../components/Button';\r\nimport { spaceAroundX } from '../helpers';\r\n\r\nexport default class PaytableScreen extends Screen {\r\n  constructor(ctx) {\r\n    super(ctx);\r\n    this.loader.once('complete', () => this.init());\r\n  }\r\n\r\n  init() {\r\n    const { app, loadScreen } = this;\r\n\r\n    const height = 50;\r\n\r\n    // frame\r\n    const frame = new PIXI.Graphics();\r\n    frame.beginFill(0xc5defd);\r\n    frame.drawRect(0, 0, app.screen.width, height);\r\n    frame.endFill();\r\n    this.addChild(frame);\r\n\r\n    // label\r\n    const label = new Label('Paytable');\r\n    label.style.fontSize = 30;\r\n    frame.addChild(label);\r\n\r\n    // button\r\n    const button = new Button('Back to game');\r\n    frame.addChild(button);\r\n\r\n    // back to game\r\n    button.on('pointertap', () => {\r\n      loadScreen('game');\r\n    });\r\n\r\n    // Positions\r\n    const elms = [label, button];\r\n    spaceAroundX(app.screen.width, height, ...elms);\r\n\r\n    // paylable\r\n    const paylable = new Paylable(app.screen.width, app.screen.height - height);\r\n    paylable.y = height;\r\n    this.addChild(paylable);\r\n\r\n    // Members\r\n    this.label = label;\r\n    this.button = button;\r\n    this.paylable = paylable;\r\n  }\r\n}\r\n","import * as PIXI from 'pixi.js';\r\n\r\nexport default class Screen extends PIXI.Container {\r\n  constructor(ctx) {\r\n    super();\r\n    this.ctx = ctx;\r\n    this.app = ctx.app;\r\n    this.config = ctx.config;\r\n    this.loadScreen = ctx.loadScreen;\r\n    // this.loader = new PIXI.loaders.Loader();\r\n    this.loader = ctx.loader;\r\n    // size\r\n    this.width = this.app.screen.width;\r\n    this.height = this.app.screen.height;\r\n    // TODO: resize\r\n  }\r\n\r\n  update() {}\r\n}\r\n","import multipliers from './data/multipliers.json';\r\n\r\nconst initialState = {\r\n  // size\r\n  root: '.root',\r\n  reels: 3,\r\n  lines: 3,\r\n  width: 640,\r\n  height: 480,\r\n  // money\r\n  // balance: 10000,\r\n  balance: 1500,\r\n  wager: 100,\r\n  wagerStep: 100,\r\n  maxWager: 500,\r\n  // interface\r\n  autoSpinDelay: 2000,\r\n  spinTime: 1000,\r\n  stopDelay: 200,\r\n  // data\r\n  activePaylines: [],\r\n  paylines: [],\r\n  multipliers,\r\n  activeMultipliers: [],\r\n  // Assets\r\n  sounds: {},\r\n  symbols: [],\r\n};\r\n\r\nclass State {\r\n  constructor() {\r\n    this.reset();\r\n  }\r\n\r\n  reset() {\r\n    Object.assign(this, initialState);\r\n    this.symbols = [];\r\n    this.activePaylines = [1];\r\n  }\r\n}\r\n\r\nexport default new State();\r\n","import SlotGame from './SlotGame';\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  // Init game\r\n  const game = new SlotGame({\r\n    root: '.root',\r\n    reels: 3,\r\n    lines: 3,\r\n  });\r\n\r\n  // Generating buttons to create a game of various sizes\r\n  (function genStartGameButtons(...sizes) {\r\n    sizes.forEach(([reels, lines]) => {\r\n      const button = document.createElement('button');\r\n      button.textContent = `New game ${reels} x ${lines}`;\r\n      button.style.margin = `10px`;\r\n\r\n      // Reinit game\r\n      button.addEventListener('click', () => {\r\n        // remove old\r\n        window.game.destroy();\r\n        window.game = null;\r\n        // create new\r\n        const newGame = new SlotGame({\r\n          root: '.root',\r\n          reels,\r\n          lines,\r\n        });\r\n        window.game = newGame;\r\n      });\r\n      document.body.appendChild(button);\r\n    });\r\n  })([3, 3], [3, 5], [5, 5]);\r\n\r\n  // Handlers\r\n\r\n  // for debug\r\n  window.game = game;\r\n});\r\n","module.exports = PIXI;"],"sourceRoot":""}